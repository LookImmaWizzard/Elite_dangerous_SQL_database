[
  {
    $project:
      /**
       * specifications: The fields to
       *   include or exclude.
       */
      {
        _id: 0,
        name: 1,
        "bodies.name": 1,
        "bodies.type": 1,
        "bodies.subType": 1,
        "bodies.spectralClass": 1,
        "bodies.mainStar": 1,
      },
  },
  {
    $set:
      /**
       * field: The field name
       * expression: The expression.
       */
      {
        system: "$name",
      },
  },
  {
    $unwind:
      /**
       * path: Path to the array field.
       * includeArrayIndex: Optional name for index.
       * preserveNullAndEmptyArrays: Optional
       *   toggle to unwind null and empty values.
       */
      {
        path: "$bodies",
      },
  },
  {
    $match:
      /**
       * query: The query in MQL.
       */
      {
        "bodies.type": "Star",
      },
  },
  {
    $project:
      /**
       * specifications: The fields to
       *   include or exclude.
       */
      {
        name: 0,
        "bodies.type": 0,
      },
  },
]
